"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/csv",r=arguments[2];_classCallCheck(this,e),this._delimiter=t,this._contentType=n,this._byteOrderMark=r,this._rows=[[]]}return _createClass(e,[{key:"_quote",value:function(e){return'"'+e.replace(/"/g,'""')+'"'}},{key:"writeValue",value:function(e){var t=void 0===e?"":String(e),n=t.indexOf(this._delimiter)!==-1||/"\r\n/.test(t);this._currentRow.push(n?this._quote(t):t)}},{key:"writeLine",value:function(){this._rows.push([])}},{key:"toString",value:function(){var e=this;return this._rows.map(function(t){return t.join(e._delimiter)}).reduce(function(e,t){return e+"\r\n"+t})}},{key:"toBlob",value:function(){var e=this._byteOrderMark?[this._byteOrderMark,this.toString()]:[this.toString()];return new Blob(e,{type:this._contentType})}},{key:"_currentRow",get:function(){return this._rows[this._rows.length-1]}}]),e}(),t=function(){function t(e){_classCallCheck(this,t),this._options=e||{}}return _createClass(t,[{key:"_createCsvBlob",value:function(t){var n=this._options.delimeter||",",r=this._options.contentType||"text/csv",o=this._options.headers||{},i=this._options.formatters||{},a=this._options.includeHeaders,s=this._options.byteOrderMark,u=function(e){return i[e]||function(e){return e}},c=new e(n,r,s),l=this._options.columns||Object.getOwnPropertyNames(t[0]);return(void 0===a||a)&&(l.forEach(function(e){return c.writeValue(o[e]||e)}),c.writeLine()),t.forEach(function(e){l.forEach(function(t){return c.writeValue(u(t)(e[t]))}),c.writeLine()}),c.toBlob()}},{key:"_download",value:function(e,t){if(navigator.msSaveBlob)return void navigator.msSaveBlob(e,t);var n=document.createElement("A"),r=URL.createObjectURL(e);n.href=r,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"downloadCsv",value:function(e){var t=this._options.onError||function(e){return alert("Unable to create export: "+e.message)};if(!e||!e.length)return void t(new Error(" no data provided. File would be empty."));try{console.info("Generating CSV download");var n=this._createCsvBlob(e),r=this._options.filename||"export.csv";this._download(n,r)}catch(o){console.warn(o),t(o)}}}],[{key:"create",value:function(e){return new t(e)}},{key:"download",value:function(e){return(new t).downloadCsv(e)}}]),t}();window.Export=t}();